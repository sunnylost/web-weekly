{"version":3,"sources":["index.min.js"],"names":["global","factory","define","amd","exports","mod","base","this","doc","window","document","undefined","$","selector","querySelectorAll","key","index","fetch","htmlEl","bodyEl","articleEl","zombieEl","cached","rdate","isArchivesShown","hasArchives","ARCHIVES","ARCHIVES_SHOWN","LOAD_CLASS","newDate","Date","navigate","generatearchives","toggleArchives","hideArchives","showArchives","listData","archivesEl","then","resp","json","data","location","hash","substring","match","issue","last","length","filter","date","innerHTML","classList","remove","text","rawHtml","setTimeout","add","createElement","className","map","value","i","join","appendChild","onclick","e","target","tagName","toLocaleLowerCase","onkeyup","keyCode","onhashchange","href","newURL"],"mappings":"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","file":"index.min.js","sourcesContent":["(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([\"exports\"], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(exports);\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod.exports);\n        global.base = mod.exports;\n    }\n})(this, function (exports) {\n    \"use strict\";\n\n    var doc = window.document,\n        base = undefined;\n\n    base = {\n        $: function $(selector) {\n            return doc.querySelectorAll(selector);\n        }\n    };\n\n    for (var key in base) {\n        window[key] = base[key];\n    }\n});\n(function (global, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(['exports'], factory);\n    } else if (typeof exports !== 'undefined') {\n        factory(exports);\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod.exports);\n        global.index = mod.exports;\n    }\n})(this, function (exports) {\n    'use strict';\n\n    var global = window,\n        $ = global.$,\n        fetch = global.fetch,\n        htmlEl = $('html')[0],\n        bodyEl = $('body')[0],\n        articleEl = $('#article')[0],\n        zombieEl = $('#zombie')[0],\n        cached = {},\n        rdate = /(\\d{4}\\-\\d{2}\\-\\d{2})/,\n        isArchivesShown = false,\n        hasArchives = false,\n        ARCHIVES = 'archives',\n        ARCHIVES_SHOWN = 'archives-shown',\n        LOAD_CLASS = 'loaded',\n        newDate = +new Date(),\n        navigate = undefined,\n        generatearchives = undefined,\n        toggleArchives = undefined,\n        hideArchives = undefined,\n        showArchives = undefined,\n        listData = undefined,\n        archivesEl = undefined;\n\n    fetch('datas.json?t=' + newDate).then(function (resp) {\n        return resp.json();\n    }).then(function (data) {\n        listData = data;\n        navigate(location.hash.substring(1));\n        generatearchives();\n    });\n\n    navigate = function (hash) {\n        var match = undefined,\n            issue = undefined,\n            last = listData[listData.length - 1];\n\n        if (match = hash.match(rdate)) {\n            match = match[1];\n            issue = listData.filter(function (date) {\n                return date == match;\n            });\n            issue = issue.length ? issue[0] : last;\n        } else {\n            issue = last;\n        }\n\n        if (cached[issue]) {\n            return articleEl.innerHTML = cached[issue];\n        }\n\n        htmlEl.classList.remove(LOAD_CLASS);\n\n        fetch('contents/indeterminate/' + issue + '.html').then(function (resp) {\n            return resp.text();\n        }).then(function (rawHtml) {\n            cached[issue] = articleEl.innerHTML = rawHtml;\n            setTimeout(function () {\n                return htmlEl.classList.add(LOAD_CLASS);\n            }, 1000);\n        });\n    };\n\n    generatearchives = function () {\n        archivesEl = document.createElement('ul');\n        archivesEl.className = 'archives';\n        archivesEl.innerHTML = listData.map(function (value, i) {\n            return '<li><a href=\"#' + value + '\">#' + (i + 1) + '</a></li>';\n        }).join('');\n        bodyEl.appendChild(archivesEl);\n\n        hasArchives = true;\n        archivesEl.onclick = function (e) {\n            if (e.target.tagName.toLocaleLowerCase() == 'a') {\n                toggleArchives();\n            }\n        };\n\n        if (location.hash.substring(1) == ARCHIVES) {\n            showArchives();\n        }\n    };\n\n    toggleArchives = function () {\n        return hasArchives && isArchivesShown ? hideArchives() : showArchives();\n    };\n\n    hideArchives = function () {\n        htmlEl.classList.remove(ARCHIVES_SHOWN);\n        isArchivesShown = false;\n    };\n\n    showArchives = function () {\n        htmlEl.classList.add(ARCHIVES_SHOWN);\n        isArchivesShown = true;\n    };\n\n    $('#archives')[0].onclick = toggleArchives;\n\n    global.onkeyup = function (e) {\n        return e.keyCode == 27 && hideArchives();\n    };\n\n    global.onhashchange = function (e) {\n        var hash = undefined;\n        zombieEl.href = e.newURL;\n        hash = zombieEl.hash.substring(1);\n\n        if (hash == ARCHIVES) {\n            showArchives();\n        } else {\n            hideArchives();\n            navigate(hash);\n        }\n    };\n});\n//# sourceMappingURL=data:application/json;base64,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QUFJLGVBQWUsR0FBRyxZQUFZLEVBQUUsR0FBRyxZQUFZLEVBQUU7S0FBQSxDQUFBOztBQUV2RixnQkFBWSxHQUFHLFlBQU07QUFDakIsY0FBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUUsY0FBYyxDQUFFLENBQUE7QUFDekMsdUJBQWUsR0FBRyxLQUFLLENBQUE7S0FDMUIsQ0FBQTs7QUFFRCxnQkFBWSxHQUFHLFlBQU07QUFDakIsY0FBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUUsY0FBYyxDQUFFLENBQUE7QUFDdEMsdUJBQWUsR0FBRyxJQUFJLENBQUE7S0FDekIsQ0FBQTs7QUFFRCxLQUFDLENBQUUsV0FBVyxDQUFFLENBQUUsQ0FBQyxDQUFFLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQTs7QUFFOUMsVUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFBLENBQUM7ZUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLEVBQUUsSUFBSSxZQUFZLEVBQUU7S0FBQSxDQUFBOztBQUV2RCxVQUFNLENBQUMsWUFBWSxHQUFHLFVBQUEsQ0FBQyxFQUFJO0FBQ3ZCLFlBQUksSUFBSSxZQUFBLENBQUE7QUFDUixnQkFBUSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ3hCLFlBQUksR0FBWSxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBRSxDQUFDLENBQUUsQ0FBQTs7QUFFNUMsWUFBSyxJQUFJLElBQUksUUFBUSxFQUFHO0FBQ3BCLHdCQUFZLEVBQUUsQ0FBQTtTQUNqQixNQUFNO0FBQ0gsd0JBQVksRUFBRSxDQUFBO0FBQ2Qsb0JBQVEsQ0FBRSxJQUFJLENBQUUsQ0FBQTtTQUNuQjtLQUNKLENBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgZG9jID0gd2luZG93LmRvY3VtZW50LFxuICAgIGJhc2VcblxuYmFzZSA9IHtcbiAgICAkKCBzZWxlY3RvciApIHtcbiAgICAgICAgcmV0dXJuIGRvYy5xdWVyeVNlbGVjdG9yQWxsKCBzZWxlY3RvciApXG4gICAgfVxufVxuXG5mb3IgKCBsZXQga2V5IGluIGJhc2UgKSB7XG4gICAgd2luZG93WyBrZXkgXSA9IGJhc2VbIGtleSBdXG59XG4iLCJsZXQgZ2xvYmFsICAgICAgICAgID0gd2luZG93LFxuICAgICQgICAgICAgICAgICAgICA9IGdsb2JhbC4kLFxuICAgIGZldGNoICAgICAgICAgICA9IGdsb2JhbC5mZXRjaCxcblxuICAgIGh0bWxFbCAgICAgICAgICA9ICQoICdodG1sJyApWyAwIF0sXG4gICAgYm9keUVsICAgICAgICAgID0gJCggJ2JvZHknIClbIDAgXSxcbiAgICBhcnRpY2xlRWwgICAgICAgPSAkKCAnI2FydGljbGUnIClbIDAgXSxcbiAgICB6b21iaWVFbCAgICAgICAgPSAkKCAnI3pvbWJpZScgKVsgMCBdLFxuXG4gICAgY2FjaGVkICAgICAgICAgID0ge30sXG5cbiAgICByZGF0ZSAgICAgICAgICAgPSAvKFxcZHs0fVxcLVxcZHsyfVxcLVxcZHsyfSkvLFxuICAgIGlzQXJjaGl2ZXNTaG93biA9IGZhbHNlLFxuICAgIGhhc0FyY2hpdmVzICAgICA9IGZhbHNlLFxuXG4gICAgQVJDSElWRVMgICAgICAgID0gJ2FyY2hpdmVzJyxcbiAgICBBUkNISVZFU19TSE9XTiAgPSAnYXJjaGl2ZXMtc2hvd24nLFxuICAgIExPQURfQ0xBU1MgICAgICA9ICdsb2FkZWQnLFxuICAgIG5ld0RhdGUgICAgICAgICA9ICsoIG5ldyBEYXRlICksXG5cbiAgICBuYXZpZ2F0ZSwgZ2VuZXJhdGVhcmNoaXZlcywgdG9nZ2xlQXJjaGl2ZXMsIGhpZGVBcmNoaXZlcywgc2hvd0FyY2hpdmVzLFxuICAgIGxpc3REYXRhLCBhcmNoaXZlc0VsXG5cbmZldGNoKCBgZGF0YXMuanNvbj90PSR7bmV3RGF0ZX1gIClcbiAgICAudGhlbiggcmVzcCA9PiByZXNwLmpzb24oKSApXG4gICAgLnRoZW4oIGRhdGEgPT4ge1xuICAgICAgICBsaXN0RGF0YSA9IGRhdGFcbiAgICAgICAgbmF2aWdhdGUoIGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKCAxICkgKVxuICAgICAgICBnZW5lcmF0ZWFyY2hpdmVzKClcbiAgICB9IClcblxubmF2aWdhdGUgPSBoYXNoID0+IHtcbiAgICBsZXQgbWF0Y2gsIGlzc3VlLFxuICAgICAgICBsYXN0ID0gbGlzdERhdGFbIGxpc3REYXRhLmxlbmd0aCAtIDEgXVxuXG4gICAgaWYgKCBtYXRjaCA9IGhhc2gubWF0Y2goIHJkYXRlICkgKSB7XG4gICAgICAgIG1hdGNoID0gbWF0Y2hbIDEgXVxuICAgICAgICBpc3N1ZSA9IGxpc3REYXRhLmZpbHRlciggZGF0ZSA9PiBkYXRlID09IG1hdGNoIClcbiAgICAgICAgaXNzdWUgPSBpc3N1ZS5sZW5ndGggPyBpc3N1ZVsgMCBdIDogbGFzdFxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlzc3VlID0gbGFzdFxuICAgIH1cblxuICAgIGlmICggY2FjaGVkWyBpc3N1ZSBdICkge1xuICAgICAgICByZXR1cm4gYXJ0aWNsZUVsLmlubmVySFRNTCA9IGNhY2hlZFsgaXNzdWUgXVxuICAgIH1cblxuICAgIGh0bWxFbC5jbGFzc0xpc3QucmVtb3ZlKCBMT0FEX0NMQVNTIClcblxuICAgIGZldGNoKCBgY29udGVudHMvaW5kZXRlcm1pbmF0ZS8keyBpc3N1ZSB9Lmh0bWxgIClcbiAgICAgICAgLnRoZW4oIHJlc3AgPT4gcmVzcC50ZXh0KCkgKVxuICAgICAgICAudGhlbiggcmF3SHRtbCA9PiB7XG4gICAgICAgICAgICBjYWNoZWRbIGlzc3VlIF0gPSBhcnRpY2xlRWwuaW5uZXJIVE1MID0gcmF3SHRtbFxuICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4gaHRtbEVsLmNsYXNzTGlzdC5hZGQoIExPQURfQ0xBU1MgKSwgMTAwMCApXG4gICAgICAgIH0gKVxufVxuXG5nZW5lcmF0ZWFyY2hpdmVzID0gKCkgPT4ge1xuICAgIGFyY2hpdmVzRWwgICAgICAgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3VsJyApXG4gICAgYXJjaGl2ZXNFbC5jbGFzc05hbWUgPSAnYXJjaGl2ZXMnXG4gICAgYXJjaGl2ZXNFbC5pbm5lckhUTUwgPSBsaXN0RGF0YS5tYXAoICggdmFsdWUsIGkgKSA9PiB7XG4gICAgICAgIHJldHVybiBgPGxpPjxhIGhyZWY9XCIjJHt2YWx1ZX1cIj4jJHtpICsgMX08L2E+PC9saT5gXG4gICAgfSApLmpvaW4oICcnIClcbiAgICBib2R5RWwuYXBwZW5kQ2hpbGQoIGFyY2hpdmVzRWwgKVxuXG4gICAgaGFzQXJjaGl2ZXMgICAgICAgID0gdHJ1ZVxuICAgIGFyY2hpdmVzRWwub25jbGljayA9ICggZSApID0+IHtcbiAgICAgICAgaWYgKCBlLnRhcmdldC50YWdOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT0gJ2EnICkge1xuICAgICAgICAgICAgdG9nZ2xlQXJjaGl2ZXMoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCBsb2NhdGlvbi5oYXNoLnN1YnN0cmluZyggMSApID09IEFSQ0hJVkVTICkge1xuICAgICAgICBzaG93QXJjaGl2ZXMoKVxuICAgIH1cbn1cblxudG9nZ2xlQXJjaGl2ZXMgPSAoKSA9PiBoYXNBcmNoaXZlcyAmJiBpc0FyY2hpdmVzU2hvd24gPyBoaWRlQXJjaGl2ZXMoKSA6IHNob3dBcmNoaXZlcygpXG5cbmhpZGVBcmNoaXZlcyA9ICgpID0+IHtcbiAgICBodG1sRWwuY2xhc3NMaXN0LnJlbW92ZSggQVJDSElWRVNfU0hPV04gKVxuICAgIGlzQXJjaGl2ZXNTaG93biA9IGZhbHNlXG59XG5cbnNob3dBcmNoaXZlcyA9ICgpID0+IHtcbiAgICBodG1sRWwuY2xhc3NMaXN0LmFkZCggQVJDSElWRVNfU0hPV04gKVxuICAgIGlzQXJjaGl2ZXNTaG93biA9IHRydWVcbn1cblxuJCggJyNhcmNoaXZlcycgKVsgMCBdLm9uY2xpY2sgPSB0b2dnbGVBcmNoaXZlc1xuXG5nbG9iYWwub25rZXl1cCA9IGUgPT4gZS5rZXlDb2RlID09IDI3ICYmIGhpZGVBcmNoaXZlcygpXG5cbmdsb2JhbC5vbmhhc2hjaGFuZ2UgPSBlID0+IHtcbiAgICBsZXQgaGFzaFxuICAgIHpvbWJpZUVsLmhyZWYgPSBlLm5ld1VSTFxuICAgIGhhc2ggICAgICAgICAgPSB6b21iaWVFbC5oYXNoLnN1YnN0cmluZyggMSApXG5cbiAgICBpZiAoIGhhc2ggPT0gQVJDSElWRVMgKSB7XG4gICAgICAgIHNob3dBcmNoaXZlcygpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGlkZUFyY2hpdmVzKClcbiAgICAgICAgbmF2aWdhdGUoIGhhc2ggKVxuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ=="],"sourceRoot":"/source/"}